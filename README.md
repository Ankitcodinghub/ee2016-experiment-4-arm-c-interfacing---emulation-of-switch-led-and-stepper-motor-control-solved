# ee2016-experiment-4-arm-c-interfacing---emulation-of-switch-led-and-stepper-motor-control-solved
**TO GET THIS SOLUTION VISIT:** [EE2016 Experiment 4-ARM C-Interfacing ‚Äì Emulation of Switch LED and Stepper Motor Control Solved](https://www.ankitcodinghub.com/product/ee2016-experiment-4-arm-c-interfacing-emulation-of-switch-led-and-stepper-motor-control-solved/)


---

üì© **If you need this solution or have special requests:** **Email:** ankitcoding@gmail.com  
üì± **WhatsApp:** +1 419 877 7882  
üìÑ **Get a quote instantly using this form:** [Ask Homework Questions](https://www.ankitcodinghub.com/services/ask-homework-questions/)

*We deliver fast, professional, and affordable academic help.*

---

<h2>Description</h2>



<div class="kk-star-ratings kksr-auto kksr-align-center kksr-valign-top" data-payload="{&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:&quot;92161&quot;,&quot;slug&quot;:&quot;default&quot;,&quot;valign&quot;:&quot;top&quot;,&quot;ignore&quot;:&quot;&quot;,&quot;reference&quot;:&quot;auto&quot;,&quot;class&quot;:&quot;&quot;,&quot;count&quot;:&quot;1&quot;,&quot;legendonly&quot;:&quot;&quot;,&quot;readonly&quot;:&quot;&quot;,&quot;score&quot;:&quot;5&quot;,&quot;starsonly&quot;:&quot;&quot;,&quot;best&quot;:&quot;5&quot;,&quot;gap&quot;:&quot;4&quot;,&quot;greet&quot;:&quot;Rate this product&quot;,&quot;legend&quot;:&quot;5\/5 - (1 vote)&quot;,&quot;size&quot;:&quot;24&quot;,&quot;title&quot;:&quot;EE2016 Experiment 4-ARM C-Interfacing - Emulation of Switch LED and Stepper Motor Control Solved&quot;,&quot;width&quot;:&quot;138&quot;,&quot;_legend&quot;:&quot;{score}\/{best} - ({count} {votes})&quot;,&quot;font_factor&quot;:&quot;1.25&quot;}">

<div class="kksr-stars">

<div class="kksr-stars-inactive">
            <div class="kksr-star" data-star="1" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" data-star="2" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" data-star="3" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" data-star="4" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" data-star="5" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
    </div>

<div class="kksr-stars-active" style="width: 138px;">
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
    </div>
</div>


<div class="kksr-legend" style="font-size: 19.2px;">
            5/5 - (1 vote)    </div>
    </div>
<div class="page" title="Page 1">
<div class="layoutArea">
<div class="column">
ARM C-Interfacing ‚Äì Emulation of Switch LED and Stepper Motor Control

1 Aim

Using C-interfacing, use C-programming, to implement the following tasks:

(i) Read the status (binary position) of the switch and use the LEDs (8 LEDs are provided) to display the status of

each of the 8-bit DIP switch

(ii) Stepper motor control using Vi Microsystem‚Äôs ViARM 7238 development board. Due to ongoing pandemic, only

emulated version of this experiment is intended here.

2 Equipments, Hardwares / Softwares Required The list of equipments, components required are:

1. ARM ViARM 2378 development board and accessaries

2. RS-232 cable

3. Keil microvision 5

4. USB- serial converter (this is a must when the PC loaded with keil doesnt have a serial port). 5. Ùè∞éash magic

6. Burn o-mat

7. Stepper motor

The hardware components are given here just not to loose the context of the experiment. Otherwise it is a purely emulation based experiment (due to the ongoing pandemic).

3 Background Information

In this Section we would discuss the following background information which are very much essential to do the above experiment

1. ViARM-2378 Development Board

2. LED Interfacing in LPC 2378 ARM processor

3. Stepper motor control by LPC 2378 ARM processor

4. Demo programs (which could be used to understand and write the code for the tasks deÙè∞çned at the end).

</div>
</div>
<div class="layoutArea">
<div class="column">
1

</div>
</div>
</div>
<div class="page" title="Page 2">
<div class="layoutArea">
<div class="column">
3.1 ViARM-2378 development board ‚Äì Anatomy

</div>
</div>
<div class="layoutArea">
<div class="column">
ViARM-2378 Development Board Parts Details

</div>
</div>
<div class="layoutArea">
<div class="column">
1. NXP LPC2378 Micro controller (TQFP-144 Packaging). 2. Power supply section.

3. UART.

4. CAN Port.

5. Stepper Motor.

6. Relay.

7. USB 2.0 Device Connector.

8. 10/100 Base T Ethernet Connector. 9. PS2- Keyboard connector.

10. Stereo Jack for USB Audio Device. 11. Prog/Exec Switch.

12. Joystick.

13. TFT LCD.

</div>
</div>
<div class="layoutArea">
<div class="column">
2

</div>
</div>
</div>
<div class="page" title="Page 3">
<div class="layoutArea">
<div class="column">
14. 4 x 4 Matrix Keypad. 15. 8 Way DIP switch. 16. LED.

17. SD Card Socket.

18. Analog input Trimmer.

19. 128 x 64 Pixels Graphics LCD.

20. Jtag Connector.

21. ADC, DAC and PWM Expansion slot. 22. 50Pin Expansion Header.

23. J-Trace.

24. Seven Segment Display.

25. Serial EEPROM.

26. Speaker.

27. Temperature Sensor

3.2 LEDs ans DIP switches in ARM-2378

LEDs and DIP switches are most common in development boards.

3.2.1 LEDs

Light Emitting Diodes are the most commonly used components usually for displaying Pin‚Äôs digital state. ViARM-2378 has 8 LED‚Äôs that are connected to the microcontroller port line. One has to close the jumper J38 to use LEDs.

Used port lines: LED0 ‚Äì LED7 : P3.0 ‚Äì P3.7

</div>
</div>
<div class="layoutArea">
<div class="column">
3

</div>
</div>
</div>
<div class="page" title="Page 4">
<div class="layoutArea">
<div class="column">
3.2.2 Switches

</div>
</div>
<div class="layoutArea">
<div class="column">
Switches are devices that have two positions ‚Äì ON and OFF, which have a toggle to establish or break a connection between two contacts. The ViARM-2378 development board has one 8-way Dip switch.

</div>
</div>
<div class="layoutArea">
<div class="column">
Used port lines: SW0 ‚Äì SW7 : P4.0 ‚Äì P4.7

3.3 Stepper Motor

A stepper motor simply rotates by a Ùè∞çxed angle when the voltage is applied.

A stepper motor is a brushless electric DC motor with a large number of poles (on both rotor and stator), such that

a full rotation is divided into a number of equal steps. The motor‚Äôs position can then be commanded to move and hold at one of these steps without any position sensor for feedback (an open-loop controller), as long as the motor is carefully sized to the application in respect to torque and speed.

</div>
</div>
<div class="layoutArea">
<div class="column">
Stepper motors eÙè∞åectively have multiple ‚Äútoothed‚Äù electromagnets arranged around a central gear-shaped piece of iron. The electromagnets are energized by an external driver circuit or a micro controller. To make the motor shaft turn, Ùè∞çrst, one electromagnet is given power, which magnetically attracts the gear‚Äôs teeth. When the gear‚Äôs teeth are aligned to the Ùè∞çrst electromagnet, they are slightly oÙè∞åset from the next electromagnet. This means that when the next electromagnet is turned on and the Ùè∞çrst is turned oÙè∞å, the gear rotates slightly to align with the next one. From there the process is repeated. Each of those rotations is called a ‚Äústep‚Äù, with an integer number of steps making a full rotation. In that way, the motor can be turned by a precise angle.

</div>
</div>
<div class="layoutArea">
<div class="column">
4

</div>
</div>
</div>
<div class="page" title="Page 5">
<div class="layoutArea">
<div class="column">
The circular arrangement of electromagnets is divided into groups, each group called a phase, and there is an equal number of electromagnets per group. The number of groups is chosen by the designer of the stepper motor. The electromagnets of each group are interleaved with the electromagnets of other groups to form a uniform pattern of arrangement. For example, if the stepper motor has two groups identiÙè∞çed as A or B, and ten electromagnets in total, then the grouping pattern would be ABABABABAB.

Electromagnets within the same group are all energized together. Because of this, stepper motors with more phases typically have more wires (or leads) to control the motor.

3.3.1 Used Port lines P3.24 &amp; P3.26

3.3.2 Stepper Motor Driver in ViARM-2378

In the ViARM-2378 development board, there are many peripherals and stepper motor driver is one of them. The stepper motor driver itself is a peripheral interface controller (PIC ‚Äì as mentioned in the class). The connection diagram for the IC (which is incorporated in ViARM-2378 development board) is given below. One of the main function of the driver is to map the input control digital signals from the ARM2378 into controlling power signal to the motor.

</div>
</div>
<div class="layoutArea">
<div class="column">
5

</div>
</div>
</div>
<div class="page" title="Page 6">
<div class="layoutArea">
<div class="column">
3.3.3 Jumper Position

</div>
</div>
<div class="layoutArea">
<div class="column">
Closed 1 &amp; 2 ‚Äì Internal voltage for stepper motor Closed 2 and 3 ‚Äì External voltage for stepper motor

3.4 Demo Programs

These programs are presented here to enable the students write their own program independently, given an engineering problem of similar type.

3.4.1 DIP Switch &amp; LEDs &lt;generate .png Ùè∞çle of the .c Ùè∞çle&gt;

3.4.2 Stepper Motor Control

The demo program (StpprMtrCntrl.c) is uploaded in the moodle, controls the stepper motor (angle to which it has to be turned etc).

/* ARM C program to run Stepper Motor */ #include ‚ÄúLPC23xx.h‚Äù

void delay(void)

<pre>       { int i,j;
           for(i=0; i&lt;0xff;i++)
</pre>
<pre>               for(j=0; j&lt;0XFF;j++);
</pre>
<pre>       }
   int main(void)
</pre>
<pre>   {     IODIR0 = 0XFFFFFFFF;
           while(1)
</pre>
<pre>           { IOPIN0=0X00000280;
               delay();
</pre>
<pre>               IOPIN0=0X00000180;
               delay();
               IOPIN0=0X00000140;
               delay();
               IOPIN0=0X00000240;
               delay();
</pre>
</div>
</div>
<div class="layoutArea">
<div class="column">
}

</div>
</div>
<div class="layoutArea">
<div class="column">
6

</div>
</div>
</div>
<div class="page" title="Page 7">
<div class="layoutArea">
<div class="column">
}

</div>
</div>
<div class="layoutArea">
<div class="column">
return 0;

</div>
</div>
<div class="layoutArea">
<div class="column">
4

Following are the tasks you need to take up for this lab session:

<ol>
<li>Write a program (in C) to dis-assemble a byte into two nibbles from the DIP switch states, multiply and display the product in the LED.</li>
<li>Modify the demo code (StpprMtrCntrl.c) supplied to demonstrate the control of stepper motor to rotate in opposite direction.
(a) Identify the signal to the stepper motor and demonstrate it to your TA.
</li>
</ol>
5 Procedure Stepper Control

<ol>
<li>Write a C program, which could control the stepper motor</li>
<li>Edit the above program Ùè∞çle in Keil software. In Keil software one can edit, recompile and run etc. Compile it in Keil platform</li>
<li>Connect the serial cable from ViARM 2378 and PC</li>
<li>Dump it in ViARM 2378</li>
<li>Connect the stepper motor [Lab staÙè∞ås / TAs would have done all these including jumper wire settings, so that you need not worry about these].</li>
<li>Run the program on the development kit by resetting the ViARM-2378.</li>
</ol>
For emulation you only need to do the following:

<ol>
<li>Write a C program, which could control the stepper motor</li>
<li>Edit the above program Ùè∞çle in Keil software. In Keil software one can edit, recompile and run etc. Compile it in Keil platform</li>
<li>Identify the (digital) signal and demonstrate it to the TA</li>
</ol>
6 Results

1. Run the program and ask the TA to see the output

2. Take a snapshot using your mobile and make a report

</div>
</div>
<div class="layoutArea">
<div class="column">
Problem DeÙè∞çnitions

</div>
</div>
<div class="layoutArea">
<div class="column">
7

</div>
</div>
</div>
